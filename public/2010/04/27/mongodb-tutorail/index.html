<!DOCTYPE html>

<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>【译】MongoDB 入门教程 | blog // smallfish</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="/css/main.min.e34415025514319010e741089e6920454053855755ba465f66943ad102d2cb08.css"/>

    
    
    

    
    
 
    </head>

    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">blog // smallfish</a>
    </div>  
</header>

  <div class="nav-menu">
  
    <a class="color-link nav-link" href="/about/">About</a>
  
    <a class="color-link nav-link" href="/tags/">Tags</a>
  
    <a class="color-link nav-link" href="/archives/">Archives</a>
  
  <a class="color-link nav-link" href="/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/smallfishxy" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/smallfish" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

    

    

</div>




    <p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
    <p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>

	<script src="/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js" integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin="anonymous"></script>
</footer>

</nav>

        <div id="content" class="content-container">
        

<h1 class="post-title">【译】MongoDB 入门教程</h1>
    
    <time>2010-04-27</time>
    
    <div>
        <p>
        <p>原文参见：<a href="http://www.mongodb.org/display/DOCS/Tutorial">http://www.mongodb.org/display/DOCS/Tutorial</a></p>
<p>启动数据库</p>
<p>下载 <a href="http://www.mongodb.org/display/DOCS/Downloads">http://www.mongodb.org/display/DOCS/Downloads</a>, 解压后并启动:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> bin<span style="color:#f92672">/</span>mongod</span></span></code></pre></div>
<p>MongoDB 默认存储数据目录为 /data/db/ (或者 c:\data\db), 当然你也可以修改成不同目录, 只需要指定 &ndash;dbpath 参数:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> bin<span style="color:#f92672">/</span>mongod <span style="color:#f92672">--</span>dbpath <span style="color:#f92672">/</span>path<span style="color:#f92672">/</span>to<span style="color:#f92672">/</span>my<span style="color:#f92672">/</span>data<span style="color:#f92672">/</span>dir</span></span></code></pre></div>
<p>获取数据库连接</p>
<p>现在我们就可以使用自带的shell工具来操作数据库了. (我们也可以使用各种编程语言的驱动来使用MongoDB, 自带的shell工具可以方便我们管理数据库)</p>
<p>启动 MongoDB JavaScript 工具:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> bin<span style="color:#f92672">/</span>mongo</span></span></code></pre></div>
<p>默认 shell 连接的是本机localhost 上面的 test库, 会看到:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>MongoDB shell version: <span style="color:#ae81ff">0.9.8</span>
</span></span><span style="display:flex;"><span>url: test
</span></span><span style="display:flex;"><span>connecting to: test
</span></span><span style="display:flex;"><span>type <span style="color:#e6db74">&#34;help&#34;</span> <span style="color:#66d9ef">for</span> help
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>&ldquo;connecting to:&rdquo; 这个会显示你正在使用的数据库的名称. 想换数据库的话可以:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> use mydb</span></span></code></pre></div>
<p>可以输入 help 来查看所有的命令.</p>
<p>插入数据到集合</p>
<p>下面我们来建立一个test的集合并写入一些数据. 建立两个对象, j 和 t , 并保存到集合中去.
在例子里  &lsquo;&gt;&rsquo;  来表示是 shell 输入提示符</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> j <span style="color:#f92672">=</span> { name : <span style="color:#e6db74">&#34;mongo&#34;</span> };
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> t <span style="color:#f92672">=</span> { x : <span style="color:#ae81ff">3</span> };
</span></span><span style="display:flex;"><span>{ <span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">3</span>  }
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>save(j);
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>save(t);
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find();
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf60751712cf7758fbdbb&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf61651712cf7758fbdbc&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>有几点需要注意下 :</p>
<ul>
	<li>不需要预先建立一个集合. 在第一次插入数据时候会自动建立.</li>
	<li>在例子其实可以存储任何结构的数据, 当然在实际应用我们存储的还是相同元素的集合. 这个特性其实可以在应用里很灵活, 你不需要类似 alter table 来修改你的数据结构</li>
	<li>每次插入数据时候对象都会有一个ID, 名字叫 _id.</li>
</ul>
当你运行不同的例子, 你的对象ID值都是不同的.
<p>下面再加点数据:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">for</span>( var i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>; i<span style="color:#f92672">++</span> ) db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>save( { x:<span style="color:#ae81ff">4</span>, j:i } ); <span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find();
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf60751712cf7758fbdbb&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf61651712cf7758fbdbc&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">1</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbd&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">2</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbe&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbf&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc0&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">5</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc1&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">6</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc2&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">7</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc3&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">8</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc4&#34;</span>)}</span></span></code></pre></div>
<p>请注意下, 这里循环次数是10, 但是只显示到8, 还有2条数据没有显示.</p>
<p>如果想继续查询下面的数据只需要使用 it 命令, 就会继续下面的数据:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">7</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc3&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">8</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc4&#34;</span>)}</span></span></code></pre></div>
<p>继续</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> it
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">9</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc5&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">10</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc6&#34;</span>)}</span></span></code></pre></div>
<p>从技术上讲 find() 返回一个游标对象. 但在上面的例子里, 并没有拿到一个游标的变量. 所以 shell 自动遍历游标, 返回一个初始化的set, 并允许我们继续用 it 迭代输出.</p>
<p>当然我们也可以直接用游标来输出, 不过这个是下一部分的内容了.</p>
<p>查询数据</p>
<p>在没有深入查询之前, 我们先看看怎么从一个查询中返回一个游标对象. 可以简单的通过 find() 来查询, 他返回一个任意结构的集合. 如果实现特定的查询稍后讲解.</p>
<p>实现上面同样的查询, 然后通过 while 来输出:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> var cursor <span style="color:#f92672">=</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find();
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">while</span> (cursor<span style="color:#f92672">.</span>hasNext()) { print(tojson(cursor<span style="color:#f92672">.</span>next())); }
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf60751712cf7758fbdbb&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf61651712cf7758fbdbc&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">1</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbd&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">2</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbe&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbf&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc0&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">5</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc1&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">6</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc2&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">7</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc3&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">8</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc4&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">9</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc5&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>上面的例子显示了游标风格的迭代输出. hasNext() 函数告诉我们是否还有数据, 如果有则可以调用 next() 函数. 这里我们也用了自带的 tojson() 方法返回一个标准的 JSON 格式数据.</p>
<p>当我们使用的是 JavaScript shell, 可以用到JS的特性, forEach 就可以输出游标了. 下面的例子就是使用 forEach() 来循环输出:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find()<span style="color:#f92672">.</span>forEach( function(x) { print(tojson(x));});
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf60751712cf7758fbdbb&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf61651712cf7758fbdbc&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">1</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbd&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">2</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbe&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbf&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc0&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">5</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc1&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">6</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc2&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">7</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc3&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">8</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc4&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">9</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc5&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>forEach() 必须定义一个函数供每个游标元素调用.</p>
<p>在 mongo shell 里, 我们也可以把游标当作数组来用 :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> var cursor <span style="color:#f92672">=</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find();
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> print (tojson(cursor[<span style="color:#ae81ff">4</span>]));
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbf&#34;</span>)}</span></span></code></pre></div>
<p>使用游标时候请注意占用内存的问题, 特别是很大的游标对象, 有可能会内存溢出. 所以应该用迭代的方式来输出.</p>
<p>下面的示例则是把游标转换成真实的数组类型:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> var arr <span style="color:#f92672">=</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find()<span style="color:#f92672">.</span>toArray();
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> arr[<span style="color:#ae81ff">5</span>];
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc0&#34;</span>)}</span></span></code></pre></div>
<p>请注意这些特性只是在 mongo shell 里使用, 而不是所有的其他应用程序驱动都支持.</p>
<p>MongoDB 游标对象不是没有快照 - 如果有其他用户在集合里第一次或者最后一次调用 next(), 你可以得不到游标里的数据. 所以要明确的锁定你要查询的游标.</p>
<p>指定条件的查询</p>
<p>到这里我们已经知道怎么从游标里实现一个查询并返回数据对象, 下面就来看看怎么根据指定的条件来查询.</p>
<p>下面的示例就是说明如何执行一个类似SQL的查询, 并演示了怎么在 MongoDB 里实现. 这是在 MongoDB shell 里查询, 当然你也可以用其他的应用驱动或者语言来实现:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>SELECT <span style="color:#f92672">*</span> FROM things WHERE name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;mongo&#34;</span></span></span></code></pre></div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find({name:<span style="color:#e6db74">&#34;mongo&#34;</span>})<span style="color:#f92672">.</span>forEach(function(x) { print(tojson(x));});
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf60751712cf7758fbdbb&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>SELECT <span style="color:#f92672">*</span> FROM things WHERE x<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span></span></span></code></pre></div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find({x:<span style="color:#ae81ff">4</span>})<span style="color:#f92672">.</span>forEach(function(x) { print(tojson(x));});
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">1</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbd&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">2</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbe&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbf&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc0&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">5</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc1&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">6</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc2&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">7</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc3&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">8</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc4&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">9</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc5&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>查询条件是 { a:A, b:B, &hellip; } 类似 &ldquo;where a==A and b==B and &hellip;&rdquo;, 更多的查询方式可以参考 Mongo 开发教程部分.</p>
<p>上面显示的是所有的元素, 当然我们也可以返回特定的元素, 类似于返回表里某字段的值, 只需要在 find({x:4}) 里指定元素的名字, 比如 j:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>SELECT j FROM things WHERE x<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span></span></span></code></pre></div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find({x:<span style="color:#ae81ff">4</span>}, {j:true})<span style="color:#f92672">.</span>forEach(function(x) { print(tojson(x));});
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">1</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbd&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">2</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbe&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbf&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc0&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">5</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc1&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">6</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc2&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">7</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc3&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">8</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc4&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">9</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdc5&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>请注意 &ldquo;_id&rdquo; 元素会一直被返回.</p>
<p>findOne() - 语法糖</p>
<p>为了方便, mongo shell (其他驱动) 避免游标的可能带来的开销, 提供一个findOne() 函数. 这个函数和 find() 参数一样, 不过他返回游标里第一条数据, 或者返回 null 空数据库.</p>
<p>作为一个例子, name==&lsquo;mongo&rsquo; 可以用很多方法来实现, 可以用 next() 来循环游标(需要校验是否为null), 或者当做数组返回第一个元素.</p>
<p>但是用 findOne() 方法则更简单和高效:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> var mongo <span style="color:#f92672">=</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>findOne({name:<span style="color:#e6db74">&#34;mongo&#34;</span>});
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> print(tojson(mongo));
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf60751712cf7758fbdbb&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>findOne 方法更跟 find({name:&ldquo;mongo&rdquo;}).limit(1) 一样.</p>
<p>limit() 查询</p>
<p>你可以需要限制结果集的长度, 可以调用 limit 方法.</p>
<p>这是强烈推荐高性能的原因, 通过限制条数来减少网络传输, 例如:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>things<span style="color:#f92672">.</span>find()<span style="color:#f92672">.</span>limit(<span style="color:#ae81ff">3</span>);
</span></span><span style="display:flex;"><span><span style="color:#f92672">in</span> cursor <span style="color:#66d9ef">for</span> : DBQuery: example<span style="color:#f92672">.</span>things <span style="color:#f92672">-&gt;</span>
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;name&#34;</span> : <span style="color:#e6db74">&#34;mongo&#34;</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf60751712cf7758fbdbb&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">3</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf61651712cf7758fbdbc&#34;</span>)}
</span></span><span style="display:flex;"><span>{<span style="color:#e6db74">&#34;x&#34;</span> : <span style="color:#ae81ff">4</span> , <span style="color:#e6db74">&#34;j&#34;</span> : <span style="color:#ae81ff">1</span> , <span style="color:#e6db74">&#34;_id&#34;</span> : ObjectId(<span style="color:#e6db74">&#34;497cf87151712cf7758fbdbd&#34;</span>)}
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>更多帮助</p>
<p>除非了一般的 help 之外, 你还可以查询 help 数据库和db.whatever 来查询具体的说明.</p>
<p>如果你对一个函数要做什么, 你可以不输入 {{()}} 这些结束的括号则可以输出实现的源码, 例如:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> db<span style="color:#f92672">.</span>foo<span style="color:#f92672">.</span>insert
</span></span><span style="display:flex;"><span>function (obj, _allow_dot) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#960050;background-color:#1e0010">!</span>obj) {
</span></span><span style="display:flex;"><span>        throw <span style="color:#e6db74">&#34;no object passed to insert!&#34;</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#960050;background-color:#1e0010">!</span>_allow_dot) {
</span></span><span style="display:flex;"><span>        this<span style="color:#f92672">.</span>_validateForStorage(obj);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> this<span style="color:#f92672">.</span>_mongo<span style="color:#f92672">.</span>insert(this<span style="color:#f92672">.</span>_fullName, obj);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>mongo 是一个完整的 JavaScript shell程序, 所以在 shell 里完全可以私用JS的方法、类、语法. 此外, MongoDB 定义很多自己的类和全局变量 (比如 db). 这里可以查看完整的API说明 <a href="http://api.mongodb.org/js/">http://api.mongodb.org/js/</a>.</p>
<p>接下来</p>
<p>看完这篇教程后下一步则看MongoDB更详细的文档 <a href="http://www.mongodb.org/display/DOCS/Manual">http://www.mongodb.org/display/DOCS/Manual</a></p>

        </p>
    </div>
    

    

    <div class="page-footer">
        
    </div>


        

<link rel="stylesheet" type="text/css" href="/css/katex.min.css" crossorigin="anonymous">
<script type="text/javascript" src="/js/katex.min.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/auto-render.min.js"onload="renderMathInElement(document.body);" crossorigin="anonymous"></script>

        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/smallfishxy" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/smallfish" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

    

    

</div>




	<div class="footer-mobile-links">
        <p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
        <p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js" integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin="anonymous"></script>
</footer>

    </body>
</html>