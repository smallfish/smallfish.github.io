<!DOCTYPE html>

<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>Pylons 入门实例教程 - Hello | blog // smallfish</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="/css/main.min.e34415025514319010e741089e6920454053855755ba465f66943ad102d2cb08.css"/>

    
    
    

    
    
 
    </head>

    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">blog // smallfish</a>
    </div>  
</header>

  <div class="nav-menu">
  
    <a class="color-link nav-link" href="/about/">About</a>
  
    <a class="color-link nav-link" href="/tags/">Tags</a>
  
    <a class="color-link nav-link" href="/archives/">Archives</a>
  
  <a class="color-link nav-link" href="/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/smallfishxy" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/smallfish" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

    

    

</div>




    <p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
    <p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>

	<script src="/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js" integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin="anonymous"></script>
</footer>

</nav>

        <div id="content" class="content-container">
        

<h1 class="post-title">Pylons 入门实例教程 - Hello</h1>
    
    <time>2010-06-28</time>
    
    <div>
        <p>
        <p><a href="http://pylonshq.com/">http://pylonshq.com/</a>，当然，这些组件只是默认，你还可以根据自己喜好来选择其他组件，比如你可以采用 Jinja2 或 Genshi 模板，ORM也可以采用 SQLObject。完全是自由组合。</p>
<p>废话少说，现在开始安装吧。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~</span><span style="color:#960050;background-color:#1e0010">$</span> sudo aptitude install python<span style="color:#f92672">-</span>pylons</span></span></code></pre></div>
<p>Debian/Ubuntu 系列系统可以直接 aptitude 安装，当然你也可以使用 easy_install 或者源码安装。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~</span><span style="color:#960050;background-color:#1e0010">$</span> sudo easy_install Pylons</span></span></code></pre></div>
<p>更多安装文档请参考官网安装部分，<a href="http://pylonshq.com/docs/en/1.0/gettingstarted/#installing">http://pylonshq.com/docs/en/1.0/gettingstarted/#installing</a></p>
<p>好了，安装结束，来一个经典的Hello程序吧。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#960050;background-color:#1e0010">$</span> paster create <span style="color:#f92672">-</span>t pylons hello
</span></span><span style="display:flex;"><span>Selected <span style="color:#f92672">and</span> implied templates:
</span></span><span style="display:flex;"><span>  Pylons<span style="color:#75715e">#pylons  Pylons application template</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Variables:
</span></span><span style="display:flex;"><span>  egg:      hello
</span></span><span style="display:flex;"><span>  package:  hello
</span></span><span style="display:flex;"><span>  project:  hello
</span></span><span style="display:flex;"><span>Enter template_engine (mako<span style="color:#f92672">/</span>genshi<span style="color:#f92672">/</span>jinja2<span style="color:#f92672">/</span>etc: Template language) [<span style="color:#e6db74">&#39;mako&#39;</span>]:
</span></span><span style="display:flex;"><span>Enter sqlalchemy (<span style="color:#66d9ef">True</span><span style="color:#f92672">/</span><span style="color:#66d9ef">False</span>: Include SQLAlchemy <span style="color:#ae81ff">0.5</span> configuration) [<span style="color:#66d9ef">False</span>]:
</span></span><span style="display:flex;"><span>Creating template pylons
</span></span><span style="display:flex;"><span>Creating directory <span style="color:#f92672">./</span>hello</span></span></code></pre></div>
<p>下面输出略过，大致解说一下。Pylons 程序可以用 Paste 自动生成一些代码，包括controller。还可以运行 HTTP 服务来测试。</p>
<p>-t  表示自动创建的模板，可以如下来查看有哪些选项，更多就参考 help 吧。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#f92672">/</span>hello<span style="color:#960050;background-color:#1e0010">$</span> paster create <span style="color:#f92672">--</span>list<span style="color:#f92672">-</span>templates
</span></span><span style="display:flex;"><span>Available templates:
</span></span><span style="display:flex;"><span>  basic_package:   A basic setuptools<span style="color:#f92672">-</span>enabled package
</span></span><span style="display:flex;"><span>  paste_deploy:    A web application deployed through paste<span style="color:#f92672">.</span>deploy
</span></span><span style="display:flex;"><span>  pylons:          Pylons application template
</span></span><span style="display:flex;"><span>  pylons_minimal:  Pylons minimal application template</span></span></code></pre></div>
<p>看一下hello的目录结构：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#f92672">/</span>hello<span style="color:#960050;background-color:#1e0010">$</span> ls
</span></span><span style="display:flex;"><span>development<span style="color:#f92672">.</span>ini  ez_setup<span style="color:#f92672">.</span>py  hello<span style="color:#f92672">.</span>egg<span style="color:#f92672">-</span>info  README<span style="color:#f92672">.</span>txt  setup<span style="color:#f92672">.</span>py
</span></span><span style="display:flex;"><span>docs             hello        MANIFEST<span style="color:#f92672">.</span><span style="color:#f92672">in</span>     setup<span style="color:#f92672">.</span>cfg   test<span style="color:#f92672">.</span>ini</span></span></code></pre></div>
<p>这里具体各个文件意思就不讲解了，程序主体部分都在hello/hello目录下，development.ini 和 test.ini 分别是服务启动的配置文件，用于测试和开发环境。开始先运行一下，看效果吧。。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#f92672">/</span>hello<span style="color:#960050;background-color:#1e0010">$</span> paster serve <span style="color:#f92672">--</span>reload development<span style="color:#f92672">.</span>ini
</span></span><span style="display:flex;"><span>Starting subprocess <span style="color:#66d9ef">with</span> file monitor
</span></span><span style="display:flex;"><span>Starting server <span style="color:#f92672">in</span> PID <span style="color:#ae81ff">1519.</span>
</span></span><span style="display:flex;"><span>serving on http:<span style="color:#f92672">//</span><span style="color:#ae81ff">127.0.0.1</span>:<span style="color:#ae81ff">5000</span></span></span></code></pre></div>
<p>在浏览器中打开：http://127.0.0.1:5000 看到页面了吧？恭喜。</p>
<p>继续，写一个简单的显示 hi的 controller 程序吧。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#f92672">/</span>hello<span style="color:#960050;background-color:#1e0010">$</span> paster controller hi
</span></span><span style="display:flex;"><span>Creating <span style="color:#f92672">/</span>home<span style="color:#f92672">/</span>smallfish<span style="color:#f92672">/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#f92672">/</span>hello<span style="color:#f92672">/</span>hello<span style="color:#f92672">/</span>controllers<span style="color:#f92672">/</span>hi<span style="color:#f92672">.</span>py
</span></span><span style="display:flex;"><span>Creating <span style="color:#f92672">/</span>home<span style="color:#f92672">/</span>smallfish<span style="color:#f92672">/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#f92672">/</span>hello<span style="color:#f92672">/</span>hello<span style="color:#f92672">/</span>tests<span style="color:#f92672">/</span>functional<span style="color:#f92672">/</span>test_hi<span style="color:#f92672">.</span>py</span></span></code></pre></div>
<p>自动生成程序和 test 文件。paster 启动服务不需要重启会自动加载，可以浏览器访问：http://127.0.0.1:5000/hi/index</p>
<p>很简单吧，打开 hi.py，基本如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HiController</span>(BaseController):
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">index</span>(self):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Return a rendered template</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#return render(&#39;/hi.mako&#39;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># or, return a response</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;Hello World&#39;</span></span></span></code></pre></div>
<p>上面注释部分可以 return 一个模板文件，模板放入 templates 目录下即可。</p>
<p>去除上面的 return &lsquo;Hello&rsquo; 返回 return render(&rsquo;/hi.mako&rsquo;)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>smallfish<span style="color:#a6e22e">@debian</span>:<span style="color:#f92672">~/</span>workspace<span style="color:#f92672">/</span>python<span style="color:#f92672">/</span>hello<span style="color:#960050;background-color:#1e0010">$</span> vi hello<span style="color:#f92672">/</span>templates<span style="color:#f92672">/</span>hi<span style="color:#f92672">.</span>mako
</span></span><span style="display:flex;"><span><span style="color:#f92672">%</span> <span style="color:#66d9ef">for</span> key, value <span style="color:#f92672">in</span> request<span style="color:#f92672">.</span>environ<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">$</span>{key} <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">$</span>{value}
</span></span><span style="display:flex;"><span><span style="color:#f92672">%</span> endfor</span></span></code></pre></div>
<p>刷新 http://127.0.0.1:5000/hi/index ，可以看到一些环境变量的输出了吧。</p>
<p>今天就简单的说到这里吧，下回来一个完整的例子，包括URL、模板、数据库和Session的实例。</p>

        </p>
    </div>
    

    

    <div class="page-footer">
        
    </div>


        

<link rel="stylesheet" type="text/css" href="/css/katex.min.css" crossorigin="anonymous">
<script type="text/javascript" src="/js/katex.min.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/auto-render.min.js"onload="renderMathInElement(document.body);" crossorigin="anonymous"></script>

        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/smallfishxy" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/smallfish" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

    

    

</div>




	<div class="footer-mobile-links">
        <p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
        <p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="/js/main.min.a7205ef73b078c8daed6fe1b0826e8ba229ffabbb69d299d9446cf41f2c7d8aa.js" integrity="sha256-pyBe9zsHjI2u1v4bCCbouiKf+ru2nSmdlEbPQfLH2Ko=" crossorigin="anonymous"></script>
</footer>

    </body>
</html>